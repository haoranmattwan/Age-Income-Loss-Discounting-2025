# Age, Income, and the Discounting of Delayed Monetary Losses

This repository contains the analysis scripts, figures, and presentation materials for the peer-reviewed publication:

> Wan, H., Myerson, J., Green, L., Strube, M. J., & Hale, S. (2025). Age, income, and the discounting of delayed monetary losses. *The Journals of Gerontology, Series B: Psychological Sciences and Social Sciences, 80*(11), gbaf162. https://doi.org/10.1093/geronb/gbaf162

The data for this study are available in the Supplementary Material at the publisher's website.

---

## Project Overview

This study examined the effects of age and income on the discounting of delayed monetary losses, testing a "buffering hypothesis" which posits that age-related psychological factors may buffer against the stress of financial scarcity. The study used a wide range of loss amounts (\$150, \$2,500, and \$30,000) and a large, diverse sample of adults aged 20 to 80.

The analysis workflow begins with a simulation-based power analysis to determine the required sample size. The primary analysis then uses a series of Bayesian multilevel beta regressions to model the Area under the Curve (AuC) as the key measure of discounting. These models test for linear and nonlinear effects of age, as well as interactions between age, income, and the amount of the loss.

## Repository Structure

This project demonstrates the ability to conduct a complete, end-to-end research project and validate the results across statistical ecosystems.

* **/Analysis**: Contains the primary analysis scripts.
    * `analysis_R.qmd`: **(Primary Analysis)** A Quarto document with the complete **R** code for the entire workflow. It demonstrates data processing (`tidyverse`), power analysis (`glmmTMB`), model fitting (`brms`), and visualization (`ggplot2`).
    * `analysis_Py.ipynb`: **(Python Replication)** A Jupyter Notebook providing a direct **Python** translation of the R analysis, using `pandas` for data manipulation, `pymc` for Bayesian modeling, and `pingouin`/`scipy` for descriptive statistics.

* **/Presentation**: Contains a slide deck or poster used to present the findings of this research.

* **/Figure**: Contains the figures generated by the analysis scripts, matching those in the final publication.

---

## Methodology Snapshot

This project demonstrates a robust and sophisticated approach to statistical modeling, including:

* **Cross-Ecosystem Validation**: Replicating a complex Bayesian multilevel model from R (`brms`) in Python (`pymc`) to ensure model specification and results are robust.
* **Bayesian Multilevel Modeling**: Using Bayesian beta regression to appropriately model the proportional AuC data while accounting for repeated measures within participants, including tests for non-linear (quadratic) effects.
* **Simulation-Based Power Analysis**: A custom R function was written to simulate data (`glmmTMB`) and determine the statistical power for detecting key effects in a multilevel beta regression framework.
* **Interaction Analysis**: A comprehensive examination of two-way interactions between age, income, loss amount, and other demographic and psychological variables to test the study's primary hypotheses.
* **Reliability and Descriptive Analysis**: Includes checks on the internal consistency of the discounting measure (Cronbach's alpha) and fits nonlinear hyperboloid functions to group-level data to ensure data quality.

---

## Software and Execution

To run the analyses, you will need the appropriate software environment and the raw data file (e.g., `Lifespan.csv`) from the publication's supplementary material.

### R Environment (`/Analysis/analysis_R.qmd`)

* **Required Packages**: `brms`, `cmdstanr`, `tidyverse` (includes `readr`, `dplyr`, `ggplot2`), `glmmTMB`, `tidybayes`, `psych`, `Hmisc`, `multcomp`, `minpack.lm`, `doSNOW`, `here`, `modelr`, `ggpubr`, `bayestestR`.
* **Installation**:
    ```R
    # Install main packages
    install.packages(c("brms", "tidyverse", "glmmTMB", "tidybayes", "psych", 
                       "Hmisc", "multcomp", "minpack.lm", "doSNOW", "here", 
                       "modelr", "ggpubr", "bayestestR"))
    
    # brms requires a working Stan installation via cmdstanr
    install.packages("cmdstanr", repos = c("[https://mc-stan.org/r-packages/](https://mc-stan.org/r-packages/)", getOption("repos")))
    cmdstanr::install_cmdstan()
    ```

### Python Environment (`/Analysis/analysis_Py.ipynb`)

* **Required Packages**: `pandas`, `numpy`, `scipy`, `statsmodels`, `pymc`, `arviz`, `matplotlib`, `seaborn`, `pingouin`, `patsy`.
* **Installation**:
    ```bash
    pip install pandas numpy scipy statsmodels pymc arviz matplotlib seaborn pingouin patsy
    ```