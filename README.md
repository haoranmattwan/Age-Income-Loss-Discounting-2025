# Age, Income, and the Discounting of Delayed Monetary Losses

This repository contains the analysis scripts, figures, and presentation materials for the peer-reviewed publication:

> Wan, H., Myerson, J., Green, L., Strube, M. J., & Hale, S. (2025). Age, income, and the discounting of delayed monetary losses. *The Journals of Gerontology, Series B: Psychological Sciences and Social Sciences, 80*(11), gbaf162. https://doi.org/10.1093/geronb/gbaf162

The data for this study are available in the Supplementary Material at the publisher's website.

---

## Project Overview

This study examined the effects of age and income on the discounting of delayed monetary losses, testing a "buffering hypothesis" which posits that age-related increases in emotional stability may buffer against the stress of financial scarcity. Unlike previous research, this study used a wide range of loss amounts (\$150, \$2,500, and \$30,000) and a large, diverse sample of adults aged 20 to 80.

The analysis workflow begins with a simulation-based power analysis to determine the required sample size. The primary analysis then uses a series of Bayesian multilevel beta regressions to model the Area under the Curve (AuC) as the key measure of discounting. These models test for linear and nonlinear effects of age, as well as interactions between age, income, and the amount of the loss.

## Repository Structure

The project materials are organized into the following folders:

* **/Analysis**: Contains the primary analysis scripts that replicate the findings in the paper.
    * `analysis.qmd`: A Quarto document with the complete **R** code for the entire workflow. It demonstrates data processing, power analysis, model fitting (`brms`, `glmmTMB`), and visualization (`ggplot2`).
    * `analysis.ipynb`: A Jupyter Notebook providing a direct **Python** translation of the R analysis, using `pandas` for data manipulation, `pymc` for Bayesian modeling, and `statsmodels` for auxiliary tests.

* **/Presentation**: Contains a slide deck or poster used to present the findings of this research.

* **/Figure**: Contains the figures generated by the analysis scripts, matching those in the final publication.

---

## Methodology Snapshot

This project demonstrates a robust and sophisticated approach to statistical modeling in the behavioral sciences, including:

* **Simulation-Based Power Analysis**: A custom R function was written to simulate data and determine the statistical power for detecting key effects in a multilevel beta regression framework.
* **Bayesian Multilevel Modeling**: The core of the analysis uses Bayesian beta regression to appropriately model the proportional AuC data while accounting for repeated measures within participants. The analysis tests for both linear and quadratic effects of age.
* **Interaction Analysis**: The final model includes a comprehensive examination of two-way interactions between age, income, loss amount, and other demographic and psychological variables to test the study's primary hypotheses.
* **Reliability and Descriptive Analysis**: The analysis includes checks on the internal consistency of the discounting measure (Cronbach's alpha) and fits nonlinear hyperboloid functions to group-level data to ensure data quality.

---

## Software and Execution

To run the analyses, you will need the appropriate software environment and the raw data file (`Data_DelayLoss.csv`) from the publication's supplementary material.

### R Environment (`/Analysis/analysis.qmd`)

* **Required Packages**: `brms`, `tidyverse` (includes `readr`, `dplyr`, `ggplot2`), `glmmTMB`, `tidybayes`, `modelr`, `psych`.
* **Installation**:
    ```R
    install.packages(c("brms", "tidyverse", "glmmTMB", "tidybayes", "modelr", "psych", "here", "doSNOW"))
    # brms also requires a working Stan installation via cmdstanr
    # install.packages("cmdstanr", repos = c("[https://mc-stan.org/r-packages/](https://mc-stan.org/r-packages/)", getOption("repos")))
    # cmdstanr::install_cmdstan()
    ```

### Python Environment (`/Analysis/analysis.ipynb`)

* **Required Packages**: `pandas`, `numpy`, `pymc`, `arviz`, `statsmodels`, `patsy`, `pingouin`, `seaborn`.
* **Installation**:
    ```bash
    pip install pandas numpy pymc arviz statsmodels patsy pingouin seaborn openpyxl
    ```